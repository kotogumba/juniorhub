<div class="container">

  <h1> <%=  @blog_post.title %> </h1>
  <p> <%=  @blog_post.content %> </p>

  <%=  link_to "Back", blog_blog_posts_path(@blog), class: "btn btn-primary" %>
</div>
<div class="container ">
  <p> Votes total: <%=  @blog_post.votes.size %></p>
  <p> Likes: <%=  @blog_post.votes.where(value: 1).size %></p>
  <p> Dislikes: <%=  @blog_post.votes.where(value: -1).size %></p>
  <p> User vote: <%=  @blog_post.votes.where(user: current_user).first.value %></p>
  <div class="d-flex flex-row">
    <% if @blog_post.votes.where(user: current_user).size == 0 %>
      <%=  button_to "like", blog_blog_post_votes_path(@blog, @blog_post, value: 1), method: :post, class: "btn btn-success" %>
      <%=  button_to "dislike", blog_blog_post_votes_path(@blog, @blog_post, value: -1), method: :post, class: "btn btn-danger" %>
    <% else %>
      <%# user can update vote  with merthod patch %>
      <%=  button_to "like", blog_blog_post_vote_path(@blog, @blog_post, @blog_post.votes.where(user: current_user).first, value: 1), method: :patch, class: "btn btn-success" %>
      <%=  button_to "dislike", blog_blog_post_vote_path(@blog, @blog_post, @blog_post.votes.where(user: current_user).first, value: -1), method: :patch, class: "btn btn-danger" %>
    <% end %>
  </div>
</div>

<div class="container">
  <h6>Comments: </h2>
  <% @blog_post.comments.each do |comment| %>
    <p> <%=  comment.content %> </p>
  <% end %>
</div>




<%= render "comments/form", blog: @blog, blog_post: @blog_post, comment: Comment.new %>
